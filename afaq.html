<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="output.css" />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body class="bg-black">
    <div class="container max-w-[2500px] w-full">
      <nav
        id="block-olivero-main-menu"
        class="contextual-region primary-nav block-menu navigation menu--main shadow-md flex items-center justify-between px-6 lg:px-10 py-8 bg-white relative"
        aria-labelledby="block-olivero-main-menu-menu"
        role="navigation"
        x-data="{ open: false, dropdownOpen: false, lastFocusedElement: null, firstTabStop: null, lastTabStop: null }"
      >
        <h2
          class="visually-hidden block__title text-2xl font-bold whitespace-nowrap"
          id="block-olivero-main-menu-menu"
        >
          Tailpine
        </h2>

        <!-- Desktop Menu -->
        <ul
          class="menu primary-nav__menu primary-nav__menu--level-1 hidden xl:flex font-bold items-center gap-8"
          data-drupal-selector="primary-nav-menu--level-1"
        >
          <li
            class="primary-nav__menu-item primary-nav__menu-item--link primary-nav__menu-item--level-1 whitespace-nowrap px-6 py-2 hover:bg-gray-900 hover:text-white hover:rounded-lg hover:transition-all hover:duration-500"
          >
            <a
              href="/"
              class="primary-nav__menu-link primary-nav__menu-link--link primary-nav__menu-link--level-1"
              data-drupal-selector="primary-nav-menu-link-has-children"
              data-drupal-link-system-path="&lt;front&gt;"
            >
              <span
                class="primary-nav__menu-link-inner primary-nav__menu-link-inner--level-1"
                >Home</span
              >
            </a>
          </li>
          <li
            class="relative w-full xl:w-fit flex items-start border-b lg:border-0 border-gray-900 hover:bg-gray-900 hover:text-white rounded justify-between flex-col"
            @mouseenter="dropdownOpen = true"
            @mouseleave="dropdownOpen = false"
            @click="dropdownOpen = !dropdownOpen"
            @keydown.escape="dropdownOpen = false; lastFocusedElement.focus()"
            x-init="initFocusTrap()"
          >
            <button
              class="px-4 py-2 w-full md:w-auto whitespace-nowrap rounded hover:bg-gray-900 hover:text-white flex items-center justify-between transition-all duration-300 ease-in-out"
              @keydown.enter="dropdownOpen = !dropdownOpen"
              @keydown.space="dropdownOpen = !dropdownOpen; $event.preventDefault()"
              aria-expanded="dropdownOpen"
              aria-controls="about-submenu"
            >
              About
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 ml-2 transform transition-transform duration-300 ease-in-out"
                :class="dropdownOpen ? 'rotate-180' : 'rotate-0'"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </button>

            <!-- Sub Menu -->
            <ul
              id="about-submenu"
              class="md:absolute left-0 top-8 mt-2 w-full md:w-64 bg-white text-black border font-bold border-gray-200 rounded-lg shadow-lg z-10 transition-all duration-300 ease-in-out"
              :class="dropdownOpen ? 'flex flex-col gap-1' : 'hidden'"
              style="transition-property: opacity, max-height"
              x-ref="submenu"
              @keydown.tab="handleTab($event)"
              @keydown.shift.tab="handleShiftTab($event)"
            >
              <li class="whitespace-nowrap border-b border-gray-900">
                <a
                  href="#"
                  class="block px-4 py-2 hover:bg-gray-900 hover:text-white"
                  >Menu Link 1</a
                >
              </li>
              <li class="whitespace-nowrap border-b border-gray-900">
                <a
                  href="#"
                  class="block px-4 py-2 hover:bg-gray-900 hover:text-white"
                  >Menu Link 2</a
                >
              </li>
              <li class="whitespace-nowrap border-b border-gray-900">
                <a
                  href="#"
                  class="block px-4 py-2 hover:bg-gray-900 hover:text-white"
                  >Menu Link 3</a
                >
              </li>
            </ul>
          </li>
        </ul>

        <!-- Register and Login Buttons -->
        <div class="all_menu_buttons flex gap-6 items-center">
          <button
            class="bg-black text-lg hidden lg:flex tracking-tighter whitespace-nowrap px-10 border-none rounded py-2 text-white"
          >
            Register
          </button>
          <button
            class="bg-black text-lg hidden lg:flex tracking-tighter whitespace-nowrap px-10 border-none rounded py-2 text-white"
          >
            Login
          </button>
        </div>
      </nav>
    </div>

    //
    <script>
      //   //
      //    document.addEventListener("alpine:init", () => {
      //     Alpine.data("dropdown", () => ({
      //       open: false,
      //       dropdownOpen: false,
      //       lastFocusedElement: null,
      //       firstTabStop: null,
      //       lastTabStop: null,

      //       initFocusTrap() {
      //         this.lastFocusedElement = document.activeElement;
      //         const focusableElements = this.$refs.submenu.querySelectorAll("a");
      //         this.firstTabStop = focusableElements[0];
      //         this.lastTabStop = focusableElements[focusableElements.length - 1];
      //       },

      //       handleTab(event) {
      //         if (document.activeElement === this.lastTabStop) {
      //           event.preventDefault();
      //           this.firstTabStop.focus();
      //         }
      //       },

      //       handleShiftTab(event) {
      //         if (document.activeElement === this.firstTabStop) {
      //           event.preventDefault();
      //           this.lastTabStop.focus();
      //         }
      //       },
      //     }));
      //   });
      //
    </script>
  </body>
</html>
